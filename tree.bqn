
Parent â‡ { gâ†âŠ”ğ•© â‹„ (â†•â‰ ğ•©) {aâ€¿wâ†ğ•¨ â‹„ (âŠâŸœa 1-Ëœaâ‹w)âŒ¾(wâŠ¸âŠ) ğ•© }Â´ (1â†“(Â»g){ğ•¨â€¿ğ•©}Â¨g) }
Delete â‡ { (/Â¬ğ•¨)(âŠ¢-â‹)ğ•¨/ğ•© } # delete from parent vector
Leaf   â‡ { Â¬(â†•â‰ ğ•©)â·ğ•© }
Depth  â‡ { pâ†ğ•© â‹„ dâ†pâ‰ (â†•â‰ p) â‹„ { zâ†ğ•©âŠp â‹„ d+â†©zâ‰ ğ•© â‹„ z } _Fix p â‹„ d } 
_Fix   â† {ğ”½âˆ˜âŠ¢âŸâ‰¢âŸœğ”½_ğ•£âˆ˜âŠ¢âŸâ‰¢âŸœğ”½ğ•©}

# example:
# â—‹
# â”œâ”€â”¬â”€â”
# â—‹ â—‹ â—‹

âŸ¨none, horz, mid, start, end, vertâŸ© â† â†•6

Draw â‡ {
    ğ•Š ğ•©: ((â‰ ğ•©)â¥Š'â—‹') ğ•Š ğ•©;
  ğ•¨ ğ•Š ğ•©:
    ch â† â€¢Typeâ—¶âŸ¨âŠ¢,(0âŠ¸âŠ‘)âˆ˜â€¢Fmt, âŠ¢âŸ©Â¨ğ•¨ 
    â‹„ pâ†ğ•© â‹„ râ†{ğ•©âŠp} _fix p â‹„ dâ†Depth ğ•©                    # r: roots. d: depth
    {
      parâ†@ â‹„ hâ†@ â‹„ nâ†@ â‹„ mâ†ğ•©=r                         # init empty variables for hacking convience and mask for current root
      parâ†©{ (1+ğ•©/m/p)âŒ¾(ğ•©âŠ¸/) ğ•© }Ë˜mâŠ¸/Ë˜d=âŒœËœâ†•âŒˆÂ´d+1          # depth matrix to parent vector offset by 1 since null values are 0
      parâ†©âˆ¾Ë˜(â†•â‰ par) {Â«âŸğ•¨ ğ•©} Ë˜par                        # shift diagonal zeros to vertical line
      sâ†Ã—âŸœâˆŠË˜parÃ—>âŸœÂ»Ë˜par â‹„ eâ†Ã—âŸœ{âŒ½âˆŠâŒ½ğ•©}Ë˜ parÃ—>âŸœÂ«Ë˜par       # mark start and ends of parent horizontals

      iâ†@ 
      iâ†©{ (1+ğ•©/m/â†•â‰ p)âŒ¾(ğ•©âŠ¸/) ğ•© }Ë˜mâŠ¸/Ë˜d=âŒœËœâ†•âŒˆÂ´d+1          # depth matrix to parent vector offset by 1 since null values are 0
      iâ†©âˆ¾Ë˜(â†•â‰ i) {Â«âŸğ•¨ ğ•©} Ë˜i                        # shift diagonal zeros to vertical line


      nâ†©(<2)â€¿(<2)/i
      nâ†© {Â«ğ•©âˆ§2|â†•â‰ ğ•©}Ë˜0Â¨âŒ¾((2|â†•â‰ n)âŠ¸/) n
      nâ†© {(vertâŠ¸+)âŒ¾((0<ğ•©)âŠ¸/)ğ•©}Ë˜n # consider ch to be anything over vert

      hâ†©(<2)â€¿(<2)/parâŒˆ+`Ë˜s-e                            # extend parents to horizontal with expanded padding
      hâ†©hâˆ§Â¬{ğ•©>Â«ğ•©}Ë˜h                                     # remove overflow hendings (ie o- nodes)
      hâ†©Â«0Â¨âŒ¾((2|â†•â‰ h)âŠ¸/) h                               # bars on every second level and shift up
      hâ†©horzÃ—0âŠ¸< h                                 # set base for bars
      hâ†©hâŒˆ(startÃ—>âŸœÂ»Ë˜h)+(endÃ—>âŸœÂ«Ë˜h)           # find start and end bars
      hâ†©hâŒˆmidÃ—Â«0<n                                   # find mid bars that have children
      hâ†©hâŒŠvert                                     # clamp to vertical bar if both start and end

      {â€¢Out âŠ¢â—¶(" â”€â”¬â”œâ”â”‚"âˆ¾ch)Â¨ğ•©}Ë˜hâŒˆn                          # convert ids to characters and print
    }Â¨â·r
}
